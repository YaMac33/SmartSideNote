<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>日本の省庁 新着情報一覧</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      padding: 1em;
      background: #f7f7f7;
    }
    h1 {
      text-align: center;
    }
    .news-section {
      margin-bottom: 2em;
      background: white;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
    .news-section h2 {
      border-bottom: 2px solid #333;
      padding-bottom: 0.5em;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      margin-bottom: 0.5em;
    }
    a {
      color: #0066cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .date {
      color: #999;
      font-size: 0.9em;
      margin-right: 0.5em;
    }
  </style>
</head>
<body>
  <h1>日本の省庁 新着情報</h1>

  <div class="news-section" id="somu">
    <h2>総務省</h2>
    <ul id="somu-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="mof">
    <h2>財務省</h2>
    <ul id="mof-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="moj">
    <h2>法務省</h2>
    <ul id="moj-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="mext">
    <h2>文部科学省</h2>
    <ul id="mext-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="mhlw">
    <h2>厚生労働省</h2>
    <ul id="mhlw-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="meti">
    <h2>経済産業省</h2>
    <ul id="meti-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="mlit">
    <h2>国土交通省</h2>
    <ul id="mlit-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="maff">
    <h2>農林水産省</h2>
    <ul id="maff-list">読み込み中...</ul>
  </div>

  <div class="news-section" id="env">
    <h2>環境省</h2>
    <ul id="env-list">読み込み中...</ul>
  </div>

  <script>
    const rssFeeds = {
      somu: "https://www.soumu.go.jp/menu_news/rss/rss.xml",
      mof: "https://www.mof.go.jp/public_relations/rss.xml",
      // 法務省は公式RSSがないため、暫定的に空に（将来別の方法で対応可）
      moj: "", 
      mext: "https://www.mext.go.jp/b_menu/rss/index.xml",
      mhlw: "https://www.mhlw.go.jp/stf/houdou/index.rdf",
      meti: "https://www.meti.go.jp/press/rss.xml",
      mlit: "https://www.mlit.go.jp/rss/index.xml",
      maff: "https://www.maff.go.jp/j/press/rss.xml",
      env: "https://www.env.go.jp/press/rss/press.rdf"
    };

    const rss2jsonEndpoint = "https://api.rss2json.com/v1/api.json?rss_url=";

    async function fetchAndDisplayRSS(id, rssUrl) {
      const listEl = document.getElementById(id + "-list");
      if (!rssUrl) {
        listEl.textContent = "RSSフィードがありません。";
        return;
      }
      try {
        const res = await fetch(rss2jsonEndpoint + encodeURIComponent(rssUrl));
        if (!res.ok) throw new Error("ネットワークエラー");
        const data = await res.json();
        if (data.status !== "ok") throw new Error("RSS取得失敗");

        const items = data.items.slice(0, 5);
        listEl.innerHTML = "";

        items.forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = `<span class="date">[${new Date(item.pubDate).toLocaleDateString()}]</span> 
            <a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>`;
          listEl.appendChild(li);
        });
      } catch (e) {
        listEl.textContent = "情報の取得に失敗しました。";
        console.error(e);
      }
    }

    for (const [id, url] of Object.entries(rssFeeds)) {
      fetchAndDisplayRSS(id, url);
    }
  </script>
</body>
</html>
